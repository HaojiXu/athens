{"version":3,"sources":["athens/components/todo.cljs"],"mappings":";;;;;AAOA,AAAA,AAAMA,AACHC,AAAIC,AAASC;AADhB,AAGE,AAAMC,AAAsB,AAAA,AAACC,AAAI,AAAA,AAAA,AAACC,AAAyBL;AAA3D,AACE,AAAAM,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAA0CN,AACL,AAACQ,AACCL,AACAF,AACAC,AACL,AAACO;AALnC,AAAA,AAAAH,AAAAA,AAACC,AAAAA,AAAAA;;AAQL,AAAA,AAAA,AAAA,AAAA,AAAKG,AAEM,AAAKC,AAAQX;AAAb,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA;AAAA,AAI6B,AAAA,AAAA,AAACD,AAAcC;AAJ5C,AAK4B,AAAKW,AAAQX;;AAGpD,AAAA,AAAA,AAAA,AAAA,AAAKY,AAEM,AAAKD,AAAQX;AAAb,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA;AAAA,AAK6B,AAAA,AAAA,AAACD,AAAcC;AAL5C,AAM4B,AAAKW,AAAQX;;AAGpD,AAAA,AAAKa,AAAYH,AAAeE","names":["athens.components.todo/todo-on-click","uid","from-str","to-str","current-block-content","cljs.core.get.cljs$core$IFn$_invoke$arity$2","athens.db/get-block","G__56190","re-frame.core/dispatch","clojure.string/replace","athens.util/now-ts","athens.components.todo/component-todo","content","athens.components.todo/component-done","athens.components.todo/components"],"sourcesContent":["(ns athens.components.todo\n  (:require\n    [athens.db :as db]\n    [athens.util :refer [now-ts]]\n    [re-frame.core :refer [dispatch]]))\n\n\n(defn todo-on-click\n  [uid from-str to-str]\n\n  (let [current-block-content (get (db/get-block [:block/uid uid]) :block/string)]\n    (dispatch [:transact [{:db/id [:block/uid uid]\n                           :block/string (clojure.string/replace\n                                           current-block-content\n                                           from-str\n                                           to-str)\n                           :edit/time (now-ts)}]])))\n\n\n(def component-todo\n  {:match #\"\\[\\[TODO\\]\\]\"\n   :render (fn [content uid]\n             [:span [:input {:type     \"checkbox\"\n                             :z-index  5\n                             :class    \"component-todo\"\n                             :on-click #(todo-on-click uid #\"\\{\\{\\[\\[TODO\\]\\]\\}\\}\" \"{{[[DONE]]}}\")\n                             :id       (str content uid)}]])})\n\n\n(def component-done\n  {:match #\"\\[\\[DONE\\]\\]\"\n   :render (fn [content uid]\n             [:span [:input {:type     \"checkbox\"\n                             :z-index  5\n                             :class    \"component-todo\"\n                             :checked  \"true\"\n                             :on-click #(todo-on-click uid #\"\\{\\{\\[\\[DONE\\]\\]\\}\\}\" \"{{[[TODO]]}}\")\n                             :id       (str content uid)}]])})\n\n\n(def components [component-todo component-done])\n"]}